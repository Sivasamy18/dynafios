option_settings:
    -
        namespace: aws:elasticbeanstalk:application:environment
        option_name: COMPOSER_HOME
        value: /root

    -
        namespace: aws:elasticbeanstalk:container:php:phpini
        option_name: document_root
        value: /public
    -
        namespace: aws:elasticbeanstalk:container:php:phpini
        option_name: memory_limit
        value: 1024M

container_commands:
    00_upgrade_composer_version:
        command: "composer.phar self-update --2"
        cwd: "/var/app/staging"
    01_create_necessary_directories_for_composer:
        command: "mkdir -p storage/logs storage/framework/cache storage/framework/sessions storage/framework/views bootstrap/cache"
        cwd: "/var/app/staging"
    02_install_composer_dependencies:
        command: "php -d memory_limit=-1 /usr/bin/composer.phar install --no-dev --no-interaction --prefer-dist --optimize-autoloader"
        cwd: "/var/app/staging"
